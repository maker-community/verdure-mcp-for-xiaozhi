@using Microsoft.Extensions.Localization
@using Verdure.McpPlatform.Web.Icons
@using Verdure.McpPlatform.Web.Resources
@using Verdure.McpPlatform.Web.Utils
@inject IStringLocalizer<SharedResources> Loc

@if (IsCompact)
{
    <!-- 精简版 Footer：全宽、无边距、贴底部 -->
    <div style="background-color: #FAFAFA; border-top: 1px solid #E0E0E0; padding: 1.5rem 0; margin-top: 0;">
        <MudContainer MaxWidth="MaxWidth.ExtraLarge">
            <!-- 第一行：版权和许可信息（居中） -->
            <div class="text-center mb-3">
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    © @DateTime.Now.Year Verdure MCP Platform · 
                    @Loc["MadeWithLoveBy"] <MudLink Href="https://space.bilibili.com/25228512" Target="_blank" Color="Color.Primary">@Loc["AuthorName"]</MudLink>
                </MudText>
                <MudText Typo="Typo.caption" Color="Color.Secondary" Class="mt-1">
                    @Loc["LicensedUnderMIT"] · @Loc["PoweredBy"] <MudLink Href="https://github.com/maker-community" Target="_blank" Color="Color.Secondary">@Loc["MakerCommunity"]</MudLink>
                </MudText>
            </div>
            
            <!-- 第二行：版本信息（左对齐） -->
            @if (!string.IsNullOrEmpty(VersionHelpers.WebDisplayVersion))
            {
                <div class="d-flex align-center gap-3" style="flex-wrap: wrap; justify-content: flex-start;">
                    <span class="d-flex align-center" style="font-size: 0.75rem; color: var(--mud-palette-text-secondary);">
                        <MudIcon Icon="@Icons.Material.Filled.Web" Size="Size.Small" Style="font-size: 1rem; margin-right: 6px;" />
                        Web @($"v{VersionHelpers.WebDisplayVersion}")
                    </span>
                    @if (!string.IsNullOrEmpty(VersionHelpers.RuntimeVersion))
                    {
                        <span class="d-flex align-center" style="font-size: 0.75rem; color: var(--mud-palette-text-secondary);">
                            <MudIcon Icon="@Icons.Material.Filled.Code" Size="Size.Small" Style="font-size: 1rem; margin-right: 6px;" />
                            .NET @VersionHelpers.RuntimeVersion
                        </span>
                    }
                    <span class="d-flex align-center" style="font-size: 0.75rem; color: var(--mud-palette-text-secondary);">
                        <MudIcon Icon="@Icons.Material.Filled.Bolt" Size="Size.Small" Style="font-size: 1rem; margin-right: 6px;" />
                        Blazor WebAssembly
                    </span>
                </div>
            }
        </MudContainer>
    </div>
}
else
{
    <!-- 完整版 Footer：包含详细信息 -->
    <MudPaper Elevation="0" Class="mt-8 py-6" Style="background-color: #FAFAFA; border-top: 1px solid #E0E0E0;">
        <MudContainer MaxWidth="MaxWidth.ExtraLarge">
            <MudGrid>
                <!-- 项目信息 -->
                <MudItem xs="12" sm="6" md="3">
                    <div class="d-flex align-center gap-2 mb-3">
                        <img src="app-logo.png" 
                             alt="Verdure Logo" 
                             style="width: 32px; height: 32px;" />
                        <MudText Typo="Typo.h6" Style="font-weight: 600; color: #1976D2; margin: 0;">
                            Verdure MCP Platform
                        </MudText>
                    </div>
                    <MudText Typo="Typo.body2" Color="Color.Secondary" Class="mb-2">
                        @Loc["OpenSourceMultiTenantPlatform"]
                    </MudText>
                    <MudText Typo="Typo.caption" Color="Color.Secondary">
                        基于 .NET 10 和 Blazor WebAssembly
                    </MudText>
                </MudItem>

                <!-- 快速链接 -->
                <MudItem xs="12" sm="6" md="3">
                    <MudText Typo="Typo.subtitle1" Class="mb-3" Style="font-weight: 600;">
                        @Loc["QuickLinks"]
                    </MudText>
                    <MudStack Spacing="2">
                        <MudLink Href="/" Color="Color.Secondary" Typo="Typo.body2">@Loc["HomePage"]</MudLink>
                        <MudLink Href="/dashboard" Color="Color.Secondary" Typo="Typo.body2">@Loc["Dashboard"]</MudLink>
                        <MudLink Href="/connections" Color="Color.Secondary" Typo="Typo.body2">@Loc["XiaozhiMcpEndpoints"]</MudLink>
                        <MudLink Href="/mcp-services" Color="Color.Secondary" Typo="Typo.body2">@Loc["McpServices"]</MudLink>
                    </MudStack>
                </MudItem>

                <!-- 社区链接 -->
                <MudItem xs="12" sm="6" md="3">
                    <MudText Typo="Typo.subtitle1" Class="mb-3" Style="font-weight: 600;">
                        @Loc["CommunityResources"]
                    </MudText>
                    <MudStack Spacing="2">
                        <MudLink Href="https://github.com/maker-community" Target="_blank" Color="Color.Secondary" Typo="Typo.body2">
                            <div class="d-flex align-center gap-2">
                                <MudIcon Icon="@Icons.Material.Filled.Groups" Size="Size.Small" />
                                <span>@Loc["GitHubCommunity"]</span>
                            </div>
                        </MudLink>
                        <MudLink Href="https://github.com/maker-community/verdure-mcp-for-xiaozhi" Target="_blank" Color="Color.Secondary" Typo="Typo.body2">
                            <div class="d-flex align-center gap-2">
                                <MudIcon Icon="@Icons.Custom.Brands.GitHub" Size="Size.Small" />
                                <span>@Loc["ProjectSource"]</span>
                            </div>
                        </MudLink>
                        <MudLink Href="https://space.bilibili.com/25228512" Target="_blank" Color="Color.Secondary" Typo="Typo.body2">
                            <div class="d-flex align-center gap-2">
                                <MudIcon Icon="@VerdureIcons.SocialMedia.Bilibili" Size="Size.Small" />
                                <span>@Loc["BilibiliChannel"]</span>
                            </div>
                        </MudLink>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">
                            <div class="d-flex align-center gap-2">
                                <MudIcon Icon="@Icons.Material.Filled.Group" Size="Size.Small" />
                                <span>@Loc["QQGroup"]: 1023487000</span>
                            </div>
                        </MudText>
                    </MudStack>
                </MudItem>

                <!-- 技术栈 -->
                <MudItem xs="12" sm="6" md="3">
                    <MudText Typo="Typo.subtitle1" Class="mb-3" Style="font-weight: 600;">
                        @Loc["TechStack"]
                    </MudText>
                    <MudStack Spacing="1">
                        <MudText Typo="Typo.body2" Color="Color.Secondary">.NET 10</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Blazor WebAssembly</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">MudBlazor UI</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Entity Framework Core</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">PostgreSQL / SQLite</MudText>
                    </MudStack>
                </MudItem>
            </MudGrid>

            <MudDivider Class="my-4" />

            <!-- 版权信息 - 完整版 -->
            <MudGrid>
                <MudItem xs="12">
                    <!-- 第一行：版权和许可信息（居中） -->
                    <div class="text-center mb-3">
                        <MudText Typo="Typo.body2" Color="Color.Secondary">
                            © @DateTime.Now.Year Verdure MCP Platform · 
                            @Loc["MadeWithLoveBy"] <MudLink Href="https://space.bilibili.com/25228512" Target="_blank" Color="Color.Primary">@Loc["AuthorName"]</MudLink>
                        </MudText>
                        <MudText Typo="Typo.caption" Color="Color.Secondary" Class="mt-1">
                            @Loc["LicensedUnderMIT"] · @Loc["PoweredBy"] <MudLink Href="https://github.com/maker-community" Target="_blank" Color="Color.Secondary">@Loc["MakerCommunity"]</MudLink>
                        </MudText>
                    </div>
                    
                    <!-- 第二行：版本信息（左对齐） -->
                    @if (!string.IsNullOrEmpty(VersionHelpers.WebDisplayVersion))
                    {
                        <div class="d-flex align-center gap-3" style="flex-wrap: wrap; justify-content: flex-start;">
                            <MudTooltip Text="@Loc["WebVersionTooltip"]">
                                <span class="d-flex align-center px-2 py-1" style="font-size: 0.75rem; color: var(--mud-palette-primary); border: 1px solid var(--mud-palette-primary); border-radius: 16px; background: rgba(var(--mud-palette-primary-rgb), 0.08);">
                                    <MudIcon Icon="@Icons.Material.Filled.Web" Size="Size.Small" Style="font-size: 1rem; margin-right: 6px;" />
                                    Web @($"v{VersionHelpers.WebDisplayVersion}")
                                </span>
                            </MudTooltip>
                            @if (!string.IsNullOrEmpty(VersionHelpers.RuntimeVersion))
                            {
                                <MudTooltip Text="@Loc["RuntimeVersionTooltip"]">
                                    <span class="d-flex align-center px-2 py-1" style="font-size: 0.75rem; color: var(--mud-palette-secondary); border: 1px solid var(--mud-palette-secondary); border-radius: 16px; background: rgba(var(--mud-palette-secondary-rgb), 0.08);">
                                        <MudIcon Icon="@Icons.Material.Filled.Code" Size="Size.Small" Style="font-size: 1rem; margin-right: 6px;" />
                                        .NET @VersionHelpers.RuntimeVersion
                                    </span>
                                </MudTooltip>
                            }
                            <MudTooltip Text="@Loc["BlazorWasmTooltip"]">
                                <span class="d-flex align-center px-2 py-1" style="font-size: 0.75rem; color: var(--mud-palette-info); border: 1px solid var(--mud-palette-info); border-radius: 16px; background: rgba(var(--mud-palette-info-rgb), 0.08);">
                                    <MudIcon Icon="@Icons.Material.Filled.Bolt" Size="Size.Small" Style="font-size: 1rem; margin-right: 6px;" />
                                    Blazor WebAssembly
                                </span>
                            </MudTooltip>
                        </div>
                    }
                </MudItem>
            </MudGrid>
        </MudContainer>
    </MudPaper>
}

@code {
    /// <summary>
    /// 是否使用精简模式（仅显示版权信息）
    /// 首页使用完整模式 (false)，仪表盘使用精简模式 (true)
    /// </summary>
    [Parameter]
    public bool IsCompact { get; set; } = false;
}
