# 前端测试指南

## 测试新增的页面和功能

### 1. 启动应用

```powershell
# 方式一：使用 Aspire（推荐）
dotnet run --project src/Verdure.McpPlatform.AppHost

# 方式二：单独启动 Web 前端
dotnet run --project src/Verdure.McpPlatform.Web
```

### 2. 测试新首页 (Index.razor)

#### 未登录状态
1. 访问: `https://localhost:5001/` 或 `http://localhost:5000/`
2. 验证内容：
   - ✅ 显示 "Verdure MCP Platform" 标题
   - ✅ 显示平台介绍和特性
   - ✅ "立即开始使用" 按钮指向 `/login`
   - ✅ "查看源码" 按钮指向 GitHub 仓库
   - ✅ 显示核心特性（3个卡片）
   - ✅ 显示架构设计
   - ✅ 社区链接部分正确显示
   - ✅ GitHub、B站、QQ群链接可点击
   - ✅ 快速开始步骤显示正确

#### 已登录状态
1. 登录后访问 `/`
2. 验证：自动重定向到 `/dashboard`

### 3. 测试仪表盘 (Dashboard.razor)

#### 访问要求
- 必须登录才能访问
- URL: `/dashboard`

#### 验证内容
1. ✅ 显示统计卡片：
   - 小智连接数量
   - 总绑定数
   - 活跃绑定数
   - 非活跃绑定数
2. ✅ 快速操作按钮可点击
3. ✅ 显示最近的服务器列表
4. ✅ 未登录时无法访问（重定向到登录页）

### 4. 测试 Footer 组件

在任意页面底部验证：
1. ✅ 项目信息区域显示正确
2. ✅ 快速链接可点击：
   - 首页 (`/`)
   - 仪表盘 (`/dashboard`)
   - 小智连接 (`/connections`)
   - MCP服务 (`/mcp-services`)
3. ✅ 社区链接可正确打开：
   - GitHub 创客社区
   - 项目源码
   - B站主页（绿荫阿广）
   - QQ群号显示
4. ✅ 技术栈列表显示
5. ✅ 版权信息正确
6. ✅ 响应式布局（在不同屏幕尺寸下测试）

### 5. 测试顶部导航栏

#### 未登录状态
1. ✅ 显示 Logo 和标题
2. ✅ 显示社区图标按钮：
   - GitHub 图标 → maker-community
   - 代码图标 → 项目仓库
   - 视频图标 → B站主页
3. ✅ 悬停时显示 Tooltip
4. ✅ 显示语言选择器
5. ✅ 显示 "登录" 按钮

#### 已登录状态
1. ✅ 显示所有社区图标按钮
2. ✅ 显示用户菜单（头像图标）
3. ✅ 点击用户菜单显示下拉选项：
   - 用户名和邮箱
   - 设置链接
   - 退出登录链接

### 6. 测试简化的登录页面

访问: `/login`

验证内容：
1. ✅ 显示欢迎标题
2. ✅ 显示云图标
3. ✅ 显示 "使用 Keycloak 登录" 按钮
4. ✅ 按钮点击后跳转到 `authentication/login`
5. ✅ 布局简洁，没有多余信息

### 7. 测试简化的登出页面

访问: `/logout`

验证内容：
1. ✅ 显示 "正在退出登录..." 标题
2. ✅ 显示加载动画
3. ✅ 自动处理登出流程
4. ✅ 重定向到 Keycloak 登出页面

### 8. 测试侧边导航菜单

#### 未登录状态
1. ✅ 显示 "首页" 链接（指向 `/`）
2. ✅ 显示 "登录" 链接

#### 已登录状态
1. ✅ 显示 "首页" 链接
2. ✅ 显示 "Dashboard" 链接（指向 `/dashboard`）
3. ✅ 显示 "MCP 管理" 分组
4. ✅ 显示管理功能链接：
   - 小智连接
   - MCP服务
   - 服务绑定
5. ✅ 显示设置和退出登录链接

### 9. 响应式测试

测试不同屏幕尺寸：
- ✅ 桌面 (>1280px)
- ✅ 平板 (768px - 1280px)
- ✅ 手机 (<768px)

验证：
1. Footer 在小屏幕上正确换行
2. 导航栏在小屏幕上可折叠
3. 首页的卡片在小屏幕上堆叠显示
4. 社区按钮在小屏幕上不溢出

### 10. 功能集成测试

完整流程：
1. 访问首页 `/` → 看到欢迎页
2. 点击 "立即开始使用" → 跳转到登录页
3. 登录成功 → 自动跳转到 `/dashboard`
4. 查看仪表盘数据
5. 点击侧边栏链接导航到各功能页面
6. 点击顶部社区图标 → 在新标签页打开对应链接
7. 滚动到底部 → 验证 Footer 显示和链接
8. 点击退出登录 → 返回首页

## 常见问题

### Q1: 首页显示空白
**解决方案**: 
- 检查 `_Imports.razor` 是否包含所有必要的 using 语句
- 清理并重新编译: `dotnet clean && dotnet build`

### Q2: 社区图标不显示
**解决方案**: 
- 确保 MudBlazor 正确加载
- 检查 `Icons.Custom.Brands.GitHub` 是否可用
- 尝试使用 `Icons.Material.Filled.Code` 替代

### Q3: Footer 布局错乱
**解决方案**: 
- 检查 MudGrid 和 MudItem 的响应式属性
- 在浏览器开发者工具中检查 CSS

### Q4: 登录后仍显示欢迎页
**解决方案**: 
- 检查 `AuthorizeView` 组件是否正确工作
- 验证认证状态
- 查看浏览器控制台的错误信息

### Q5: Dashboard 无法访问
**解决方案**: 
- 确认已登录
- 检查 `@attribute [Authorize]` 指令
- 验证 API 服务是否正常运行

## 自动化测试（未来计划）

- [ ] 单元测试: 组件逻辑测试
- [ ] 集成测试: 页面路由和导航测试
- [ ] E2E测试: Playwright/Selenium 完整流程测试
- [ ] 可访问性测试: ARIA 标签和键盘导航

## 性能测试

- [ ] 首页加载时间 < 2秒
- [ ] Dashboard 数据加载 < 1秒
- [ ] 页面切换动画流畅
- [ ] Footer 不影响页面滚动性能

---

测试完成后，请在项目 Issue 中报告发现的问题。
